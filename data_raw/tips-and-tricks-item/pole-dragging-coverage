{
  category = "drag-building",
  dependencies = {
    "drag-building-poles"
  },
  indent = 1,
  name = "pole-dragging-coverage",
  order = "c",
  simulation = {
    init = "    global.player = game.create_test_player{name = \"Cable Guy\"}\n    global.character = global.player.character\n    global.character.teleport{0, 4}\n    global.character.cursor_stack.set_stack{name = \"small-electric-pole\", count=48}\n    global.character.walking_state = {walking = true, direction = defines.direction.east}\n    game.camera_player = global.player\n    game.camera_player_cursor_position = {0, 0}\n    game.surfaces[1].create_entities_from_blueprint_string\n    {\n      string = \"0eNqVlN1uhCAQhd9lrnGzgLCur7LZNGonWxJEg9jUGN69aC/apPjD5RDOdyYnMzNDrUfsrTIOyhlU05kByscMg3qZSi9vbuoRSlAOWyBgqnaphk5XNusrgxo8AWXe8QtK6p8E0DjlFP5g1mJ6M2Nbow0fogACfTcETWcWv8DJmLgIAlMQ8IvwnvwDsbMgdgDiJ0H0fgDKz4LkAUicBfEDkEwOW8ZBt19QW2mdocbGWdVkfadxN/QFGMSoXh91N9plJopnxKFIdKBix+FG6DVmck8OdiMPek1st9jLg1Aa65bS1Ex2TOKBUJY8IfeNRHjyPm6R8uSF3CKJ5I3cIsnkyVlJ4RiuV7P8c2QJfKIdVg0raF5wIaXMBefM+290Ncet\",\n      position = {-13,0},\n    }\n    local lights_count = 0\n    while lights_count < 8 do\n      game.surfaces[1].create_entities_from_blueprint_string\n      {\n        string = \"0eNrVmN1qwyAUgN/lXGclx8T8wZ5klGBStwmJCWrLSvHdFxs2WpnMW29CjsbjOZ8hfOQGw3TmqxLSQHcDMS5SQ/d2Ay0+JJvcmLmuHDoQhs+QgWSzi/TMpullYvMKNgMhT/wLOrTHDLg0wgi+Z7kH116e54Gr7YG/1mewLnpbski3m0tTHGgG1+2mPtAt+1aTUcvUD/yTXcSi3GOjUONZmH6bO/2ufRdKm/6fyo1iUq+LMi8Dnwzs+bVhDkDugnllihm3DbyC3eclH90m2mVFd1H89Nig2CJis6e4tEdrH8Z+IJA4CCRJCBhouohrmibZdOmdfBWAUMZBKBM9+WcIRQACjYNQJwmh8iA0AQhVHIQqSQiFB4EGINRxENokITQeBMwDFJo4Ck2SFKhHoQ5AaKMgEEzzy5j77wIJYMA8jkOeJIfaw9CGKMRpIklTE9H3RAyJIsaZIknTFFsfQ0gdMc4dSZruiL48YsgeMU4fSaL66PsjhgQS4wySpGmQ4eOPc0aSpjOiL424W+Mx2yvoHv5TZHDhSt/LJg2WTUGrqippURBrvwHLO8AOq\",\n        position = {28 + lights_count * 36, 1},\n      }\n      lights_count = lights_count + 1\n      end\n    update_camera = function()\n      game.camera_position = {global.player.position.x, global.player.position.y - 3}\n    end\n\n  ",
    update = "    if global.stop then\n      global.character.walking_state = {walking = false, direction = defines.direction.south}\n      return\n    end\n    game.camera_position = {global.character.position.x, global.character.position.y - 3}\n\n    local pole_x = math.floor(global.character.position.x + 2)\n    local pole_y = global.character.position.y - 4\n\n    if global.last_pole_x == nil then\n      global.last_pole_x = pole_x - 3\n      global.pole_count = 0\n\n    end\n    game.camera_player_cursor_position = {pole_x, pole_y}\n\n    if (global.pole_count == 0\n        or global.pole_count == 1\n        or global.pole_count == 2) and pole_x - global.last_pole_x  == 7 then\n      global.player.build_from_cursor{position = {pole_x, pole_y}}\n      global.last_pole_x = global.last_pole_x + 7\n      global.pole_count =  global.pole_count + 1\n    end\n    if (global.pole_count == 3\n        or global.pole_count == 4\n        or global.pole_count == 5) and pole_x - global.last_pole_x  == 5 then\n      global.player.build_from_cursor{position = {pole_x, pole_y}}\n      global.last_pole_x = global.last_pole_x + 5\n      if global.pole_count == 5 then\n        global.pole_count = 0\n      else\n        global.pole_count = global.pole_count + 1\n      end\n    end\n    if game.tick % 60 == 0 then\n      game.surfaces[1].build_checkerboard({{global.character.position.x + 10, global.character.position.y - 10},\n                                            {global.character.position.x + 25, global.character.position.y + 10}})\n    end\n    if global.character.cursor_stack.count == 0 then\n      global.character.walking_state = {walking = true, direction = defines.direction.south}\n      global.stop = true\n    end\n  "
  },
  tag = "[entity=small-electric-pole][img=utility/electricity_icon_unplugged]",
  type = "tips-and-tricks-item"
}